[gd_scene load_steps=10 format=3 uid="uid://cvkxr44q05aed"]

[ext_resource type="PackedScene" uid="uid://cc5rrmn7brbj2" path="res://levels/special/intro/intro.gltf" id="1_pnk1a"]
[ext_resource type="PackedScene" uid="uid://dqicakipsq6eq" path="res://levels/level_bounds.tscn" id="4_icllo"]
[ext_resource type="Script" path="res://scripts/difficulty_range.gd" id="5_lap8j"]
[ext_resource type="Script" path="res://scripts/signal_barrier.gd" id="6_i51yc"]
[ext_resource type="PackedScene" uid="uid://dcetufd2kgutc" path="res://music/level_music_player.tscn" id="7_lfc7h"]
[ext_resource type="Script" path="res://enemies/spawners/staged_spawner.gd" id="7_rb4f3"]
[ext_resource type="AudioStream" uid="uid://bg5ahhcsiuvvj" path="res://music/Botanic Panic.mp3" id="8_cbbb2"]
[ext_resource type="PackedScene" uid="uid://bawgcpe4clkdo" path="res://enemies/test_zone/test01/test01.tscn" id="8_xf3yv"]

[sub_resource type="GDScript" id="GDScript_ofv5h"]
script/source = "@tool
extends Level


@export var player: Player
@export var camera: Camera3D


func _ready() -> void:
	if Engine.is_editor_hint():
		return
	if player == null:
		push_error(\"player must be provided in intro_level\")
	if camera == null:
		push_error(\"camera must be provided\")
	set_player(player)
	set_camera(camera)
"

[node name="Intro" node_paths=PackedStringArray("player_spawn_point") instance=ExtResource("1_pnk1a")]
script = SubResource("GDScript_ofv5h")
next_level = "res://levels/far_future/cerium/cerium.tscn"
player_spawn_point = NodePath("PlayerSpawnPoint")

[node name="Lights" type="Node3D" parent="." index="5"]

[node name="OmniLight3D" type="OmniLight3D" parent="Lights" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3.72473, 1.90104)
light_energy = 2.0
light_size = 0.2
light_bake_mode = 1
shadow_enabled = true
omni_range = 7.5

[node name="OmniLight3D2" type="OmniLight3D" parent="Lights" index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.07169, 3.725, 1.901)
light_energy = 2.0
light_size = 0.2
light_bake_mode = 1
shadow_enabled = true
omni_range = 7.5

[node name="OmniLight3D3" type="OmniLight3D" parent="Lights" index="2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.072, 3.725, 1.901)
light_energy = 2.0
light_size = 0.2
light_bake_mode = 1
shadow_enabled = true
omni_range = 7.5

[node name="OmniLight3D4" type="OmniLight3D" parent="Lights" index="3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3.72473, -2.81405)
light_energy = 2.0
light_size = 0.2
light_bake_mode = 1
shadow_enabled = true
omni_range = 7.5

[node name="OmniLight3D5" type="OmniLight3D" parent="Lights" index="4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.07169, 3.725, -2.81409)
light_energy = 2.0
light_size = 0.2
light_bake_mode = 1
shadow_enabled = true
omni_range = 7.5

[node name="OmniLight3D6" type="OmniLight3D" parent="Lights" index="5"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.072, 3.725, -2.81409)
light_energy = 2.0
light_size = 0.2
light_bake_mode = 1
shadow_enabled = true
omni_range = 7.5

[node name="LevelBounds" parent="." index="6" instance=ExtResource("4_icllo")]

[node name="DifficultyRange" type="Node3D" parent="." index="7"]
script = ExtResource("5_lap8j")

[node name="SignalBarrier" type="Node" parent="DifficultyRange" index="0"]
script = ExtResource("6_i51yc")
barrier_count = 4

[node name="StagedSpawner" type="Marker3D" parent="DifficultyRange" index="1" groups=["EnemySpawners"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.2295, 0, -2.34422)
script = ExtResource("7_rb4f3")
scenes = Array[PackedScene]([null, ExtResource("8_xf3yv")])

[node name="StagedSpawner2" type="Marker3D" parent="DifficultyRange" index="2" groups=["EnemySpawners"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.4186, 0, 2.28644)
script = ExtResource("7_rb4f3")
scenes = Array[PackedScene]([ExtResource("8_xf3yv"), ExtResource("8_xf3yv")])

[node name="StagedSpawner3" type="Marker3D" parent="DifficultyRange" index="3" groups=["EnemySpawners"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.59486, 0, -1.98246)
script = ExtResource("7_rb4f3")
scenes = Array[PackedScene]([ExtResource("8_xf3yv"), ExtResource("8_xf3yv")])

[node name="StagedSpawner4" type="Marker3D" parent="DifficultyRange" index="4" groups=["EnemySpawners"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.27767, 0, 2.10141)
script = ExtResource("7_rb4f3")
scenes = Array[PackedScene]([null, ExtResource("8_xf3yv")])

[node name="PlayerSpawnPoint" type="Marker3D" parent="." index="8"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.5426, 0, 1.61973)

[node name="LevelMusicPlayer" parent="PlayerSpawnPoint" index="0" instance=ExtResource("7_lfc7h")]
stream = ExtResource("8_cbbb2")

[connection signal="passed" from="DifficultyRange/SignalBarrier" to="." method="_on_finished"]
[connection signal="finished" from="DifficultyRange/StagedSpawner" to="DifficultyRange/SignalBarrier" method="receive"]
[connection signal="finished" from="DifficultyRange/StagedSpawner2" to="DifficultyRange/SignalBarrier" method="receive"]
[connection signal="finished" from="DifficultyRange/StagedSpawner3" to="DifficultyRange/SignalBarrier" method="receive"]
[connection signal="finished" from="DifficultyRange/StagedSpawner4" to="DifficultyRange/SignalBarrier" method="receive"]
